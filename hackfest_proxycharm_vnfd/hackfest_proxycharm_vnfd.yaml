vnfd:vnfd-catalog:
  vnfd:
    - id: hackfest_proxycharm_vnfd
      name: hackfest_proxycharm_vnfd
      short-name: hackfest_proxycharm_vnfd
      version: '1.1'
      description: |
        A VNF consisting of 1 VDU connected to two external VL, and one for
        data and another one for management
      logo: osm.png
      connection-point:
        - id: vnf-mgmt
          name: vnf-mgmt
          short-name: vnf-mgmt
          type: VPORT
        - id: vnf-data
          name: vnf-data
          short-name: vnf-data
          type: VPORT
      mgmt-interface:
        cp: vnf-mgmt
      vdu:
        - id: mgmtVM
          name: mgmtVM
          image: Template-Ubuntu-5gVINNI-Development-Bionic
          count: '1'
          vm-flavor:
            vcpu-count: '1'
            memory-mb: '1024'
            storage-gb: '10'
          interface:
            - name: mgmtVM-eth0
              position: '1'
              type: EXTERNAL
              virtual-interface:
                type: VIRTIO
              external-connection-point-ref: vnf-mgmt
            - name: dataVM-xe0
              position: '2'
              type: EXTERNAL
              virtual-interface:
                type: VIRTIO
              external-connection-point-ref: vnf-data
          cloud-init-file: cloud-config.txt

          vdu-configuration:
            juju:
              charm: simple
            metrics:
              - name: uptime
              - name: users
              - name: cpu_processes
              - name: cpu_load_1min
              - name: cpu_load_5min
              - name: cpu_load_15min
              - name: memory_ram_usage
              - name: memory_swap_usage
              - name: random
            initial-config-primitive:
              - seq: '1'
                name: config
                parameter:
                  - name: ssh-hostname
                    value: <rw_mgmt_ip>
                  - name: ssh-username
                    value: ubuntu
                  - name: ssh-password
                    value: osm4u
              - seq: '2'
                name: touch
                parameter:
                  - name: filename
                    data-type: STRING
                    value: /home/ubuntu/first-touch
            config-primitive:
              - name: touch
                parameter:
                  - name: filename
                    data-type: STRING
                    default-value: /home/ubuntu/touched

          monitoring-param:
            - id: metric_mgmtVM_cpu
              nfvi-metric: cpu_utilization
            - id: metric_mgmtVM_memory
              nfvi-metric: average_memory_utilization

      monitoring-param:
        - id: metric_vim_vnf1_cpu
          name: metric_vim_vnf1_cpu
          aggregation-type: AVERAGE
          vdu-monitoring-param:
            vdu-ref: mgmtVM
            vdu-monitoring-param-ref: metric_mgmtVM_cpu
        - id: metric_vim_vnf1_memory
          name: metric_vim_vnf1_memory
          aggregation-type: AVERAGE
          vdu-monitoring-param:
            vdu-ref: mgmtVM
            vdu-monitoring-param-ref: metric_mgmtVM_memory

        - id: metric_mgmtVM_uptime
          name: metric_mgmtVM_uptime
          aggregation-type: AVERAGE
          vdu-metric:
            vdu-ref: mgmtVM
            vdu-metric-name-ref: uptime
        - id: metric_mgmtVM_users
          name: metric_mgmtVM_users
          aggregation-type: AVERAGE
          vdu-metric:
            vdu-ref: mgmtVM
            vdu-metric-name-ref: users
        - id: metric_mgmtVM_cpu_load_1min
          name: metric_mgmtVM_cpu_load_1min
          aggregation-type: AVERAGE
          vdu-metric:
            vdu-ref: mgmtVM
            vdu-metric-name-ref: cpu_load_1min
        - id: metric_mgmtVM_cpu_load_5min
          name: metric_mgmtVM_cpu_load_5min
          aggregation-type: AVERAGE
          vdu-metric:
            vdu-ref: mgmtVM
            vdu-metric-name-ref: cpu_load_5min
        - id: metric_mgmtVM_cpu_load_15min
          name: metric_mgmtVM_cpu_load_15min
          aggregation-type: AVERAGE
          vdu-metric:
            vdu-ref: mgmtVM
            vdu-metric-name-ref: cpu_load_15min
        - id: metric_mgmtVM_cpu_load_15min
          name: metric_mgmtVM_cpu_load_15min
          aggregation-type: AVERAGE
          vdu-metric:
            vdu-ref: mgmtVM
            vdu-metric-name-ref: cpu_load_15min
        - id: metric_mgmtVM_memory_ram_usage
          name: metric_mgmtVM_memory_ram_usage
          aggregation-type: AVERAGE
          vdu-metric:
            vdu-ref: mgmtVM
            vdu-metric-name-ref: memory_ram_usage
        - id: metric_mgmtVM_memory_swap_usage
          name: metric_mgmtVM_memory_swap_usage
          aggregation-type: AVERAGE
          vdu-metric:
            vdu-ref: mgmtVM
            vdu-metric-name-ref: memory_swap_usage
        - id: metric_mgmtVM_random
          name: metric_mgmtVM_random
          aggregation-type: AVERAGE
          vdu-metric:
            vdu-ref: mgmtVM
            vdu-metric-name-ref: random
